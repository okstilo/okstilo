# 初めてのPython

はじめに

## I部 Pythonの基礎知識

### 1章 PythonについてのQ&A

Pythonの特徴が書かれている

- 1.3 Pythonの欠点は何ですか？
  - 欠点はパフォーマンス

### 2章 Pythonプログラムの実行

Pythonのインストール方法とかが書かれている

### 3章 プログラムの起動方法

3.1 対話型プログラミング

pythonとすると起動する

```python
$ python
Python 3.11.5 (main, Aug 26 2023, 08:35:59) [Clang 16.0.3 ] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> print 2 ** 8
  File "<stdin>", line 1
    print 2 ** 8
    ^^^^^^^^^^^^
SyntaxError: Missing parentheses in call to 'print'. Did you mean print(...)?
```
簡単な掛け算でSyntaxエラーになった。プリントの書き方が今は違うらしい。

```python
>>> print(2 ** 8)
256
>>> 2 ** 8
256
```

3.2 プログラム（モジュール）ファイル

先頭にハッシュバンを書くやり方はRyeでは通じなかった

```shell
#!/usr/bin/env python
#!/usr/bin/python
#!/usr/local/bin/python
```


## II部 ビルトインオブジェクト

### 4章 Pythonのビルトインオブジェクト

#### 4.2 数値

```python
>>> 123 + 222
345
>>> 1.5 * 4
6.0
>>> 2 ** 100
1267650600228229401496703205376
>>> print 3.14 * 2
  File "<stdin>", line 1
    print 3.14 * 2
    ^^^^^^^^^^^^^^
SyntaxError: Missing parentheses in call to 'print'. Did you mean print(...)?
>>> print(3.14 * 2)
6.28
>>> import math
>>> math.pi
3.141592653589793
```

#### 4.3 文字列

```python
>>> S = 'Spam'
>>> S
'Spam'
>>> len(S)
4
>>> S[0]
'S'
>>> S[-1]
'm'
>>> line = 'aaa,bbb,ccc,ddd'
>>> line.split(',')
['aaa', 'bbb', 'ccc', 'ddd']
```

#### 4.4 リスト

```python
>>> L = [123, 'spam', 1.23]
>>> L
[123, 'spam', 1.23]
>>> L[0]
123
>>> L[-1]
1.23
>>> L[:-1]
[123, 'spam']
>>> L + [4, 5, 6]
[123, 'spam', 1.23, 4, 5, 6]
>>> L
[123, 'spam', 1.23] # リストの中身は更新されていない
>>> L.append('NY')
>>> L
[123, 'spam', 1.23, 'NY'] # 中身が更新
>>> L.pop(2)
1.23
>>> L
[123, 'spam', 'NY'] # 中身が更新

```

### 4.5 ディクショナリ

```python
>>> D = {'food': 'Spam', 'color': 'Pink'}
>>> D
{'food': 'Spam', 'color': 'Pink'}
>>> D['color']
'Pink'
```

#### 4.6 タプル

```python
>>> T = (1, 2, 3)
>>> T[1]
2
>>> T[1] = 4
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'tuple' object does not support item assignment
```
##### 4.6.1 なぜタプルが必要なのか

いったん作ると変更ができない。その普遍性が重要になる時がある。

#### 4.8 その他の型

型の確認

```python
>>> type(L)
<class 'list'>
>>> isinstance(L, list)
True
>>> type(T)
<class 'tuple'>
>>> type(S)
<class 'str'>
```

### 5章 数値

```python
>>> 2 * (3 + 4)
14
>>> 2 * 3 + 4
10
>>> 2 + 3 * 4
14
>>> 1 + 2.0 + 3
6.0

>>> import math
>>> oct(8)
'0o10'
```

### 6章 ダイナミックな型付け

#### 6.2 共有リファレンス

```python
>>> a = 3
>>> b = a
>>> a = 'spam'
>>> a
'spam'
>>> b
3
```
#### 6.2.1 共有リファレンスとオブジェクトの上書き

リストは共有されるので更新される

```python
>>> L1 = [2, 3, 4]
>>> L2 = L1
>>> L1[0] = 24

>>> L1
[24, 3, 4]
>>> L2
[24, 3, 4]
```
そのためスライシングしてコピーを使う

```python
>>> L1 = [2, 3, 4]
>>> L2 = L1[:]
>>> L1[0] = 24

>>> L1
[24, 3, 4]
>>> L2
[2, 3, 4]
```

#### 6.2.2 「同等」と「同一」

```python
>>> L = [1, 2, 3]
>>> M = L
>>> L == M
True
>>> L is M #　同じもの
True

>>> M = [1, 2, 3]
>>> L == M
True
>>> L is M # 同じものだけど違う
False

>>> X = 42
>>> Y = 42
>>> X == Y
True
>>> X is Y # これはキャッシュされているので同じ
True
```

### 7章 文字列

- `internationalization` の頭の `i` と最後の `n` の間が18文字あることから、 `i18n` と呼ばれる
- `CODEC` は `COders and DECoders` の略

シンプルあまり難しいところはない


### 8章 リストとディクショナリ

#### 8.1 リスト

- オブジェクトを一定の順序で並べたもの（型は問わない）
- インデックスによって要素にアクセスできる
- 長さを自由に変えられ、複数種の構成要素の混在も可能で、ネストにも対応できる
- シーケンスの一種だが、変更を加えることができる
- オブジェクトリファレンスの配列

#### 8.3 ディクショナリ

- オフセットではなくキーによって要素にアクセスする
- 要素を順不同に並べることができる
- 長さを自由に変えられ、複数種の構成要素の混在も可能（ネストにも対応できる）
- 可変製を持ち、「写像」のカテゴリに属する
  - 順序が一定ではないので、連結、スライシングはできない
- オブジェクトリファレンスのテーブル（ハッシュテーブル）

注意点

- シーケンスと同じ操作はできない
- 存在しないキーを指定して値を代入すると、要素が追加される
- キーは文字列でなくても良い

### 9章 タプル、ファイルオブジェクト、その他

#### 9.1 タプル

- オブジェクトを一定の順序で並べたもの（型は問わない）
- オフセットによってアクセスする
- 不変性シーケンスの一種である
- 長さは固定だが、複数種の構成要素の混在も可能（ネストにも対応できる）
- オブジェクトリファレンスの配列である

####　9.1.2 タプルはなぜ必要か

タプルは不変性オブジェクトであること。これが整合性の面では有利になる場面がある


#### 9.5 リファレンスとコピー

Pythonでは変数がオブジェクトのコピーではなくリファレンスを保持する

```python
>>> X = [1, 2, 3]
>>> X
[1, 2, 3]

>>> L = ['a', X, 'b']
>>> L
['a', [1, 2, 3], 'b']

>>> D = { 'x': X, 'y': 2}
>>> D
{'x': [1, 2, 3], 'y': 2}

>>> X[1] = 'surprise'

>>> X
[1, 'surprise', 3]
>>> L
['a', [1, 'surprise', 3], 'b'] # なんと！
>>> D
{'x': [1, 'surprise', 3], 'y': 2} # なんと！
```

スライシングを使ってコピーする

```python
>>> LL = ['a', X[:], 'b'] #　オブジェクトをコピーする
>>> LL
['a', [1, 'surprise', 3], 'b']

>>> DD = { 'x': X[:], 'y': 2}　#　オブジェクトをコピーする
>>> DD
{'x': [1, 'surprise', 3], 'y': 2}

>>> X[1] = 2

>>> X
[1, 2, 3]
>>> LL
['a', [1, 'surprise', 3], 'b'] #　元のまま
>>> DD
{'x': [1, 'surprise', 3], 'y': 2} #　元のまま
```
### 9.9 ビルトインオブジェクトに関する注意事項

#### 9.9.1 変数にオブジェクトを代入すると、コピーではなく、リファレンスが作られる

コピーではなくリファレンスが作られる
スライシングを使ってコピーを作ること

#### 9.9.2 繰り返し演算によるネスト

```python
>>> X
[1, 2, 3]

>>> XX = X * 4
>>> XX
[1, 2, 3, 1, 2, 3, 1, 2, 3, 1, 2, 3]

>>> XXX = [X] * 4
>>> XXX
[[1, 2, 3], [1, 2, 3], [1, 2, 3], [1, 2, 3]]
```

## III部 ステートメント

### 10章 Pythonのステートメント

#### 10.1 Pythonプログラムの構造

1. プログラムはモジュールから構成される
2. モジュールはステートメントから構成される
3. ステートメントは式から構成される
4. 式により、オブジェクトが作成・処理される
#### 10.2.3 なぜ字下げか

- 字下げでプログラミングの構造を作る
  - その方が見やすいから

### 11章 代入ステートメント、式ステートメント、printステートメント

#### 11.1.5 変数名に関するルール

- `__name__` は使わない
- 予約語は使わない
### 12章 ifステートメント

```python
>>> if x == 'k':
...   print('yes')
... else:
...   print('no')
...
yes
```
#### 12.3 Pythonのブール演算

- 0でない数値、空でないオブジェクトはすべて `true` と解釈される
- 逆に、数値0、空のオブジェクト、 `NON` は `false` と解釈される

```python
>>> a = [ ]
>>> if a:
...   print('true')
... else:
...   print('false')
...
false
```

### 13章 whileループとforループ

#### 13.1 whileループ

```python
x = 10
while x:
  x = x -1
  if x % 2 == 0:
    print x

8
6
4
2
0
```

#### 13.3 forループ

```python
sum = 0
for x in [1, 2, 3, 4]:
  sum = sum + x
  print sum

1
3
6
10
```

#### 13.5.3 シーケンスを更新するforループ

 ```python
 L = [1, 2, 3, 4, 5]
for i in range(len(L)):
  L[i] += 1

print L

[2, 3, 4, 5, 6]
 ```

#### 13.5.5 インデックスと要素を生成する：enumerate関数

```python
S = 'spam'
for (offset, item) in enumerate(S):
  print item, 'appers at offset', offset

s appers at offset 0
p appers at offset 1
a appers at offset 2
m appers at offset 3
```

 #### 13.6 リスト内包表記の概要

```python
>>> L
[1, 2, 3, 4, 5]
>>> L = [x + 10 for x in L] # ワンラインで書けてしまう！
>>> L
[11, 12, 13, 14, 15]
```

### 14章 Pythonのドキュメント

#### 14.2 ステートメント、構文についての注意事項

- コロンを忘れない
- トップレベルのコードは字下げしない
- 対話型コマンドラインでは空白行が意味を持つ
- 字下げに一貫性を持たせる
- Cと混同しない
- できる限りwhileやrangeは使わず、単純なforループを使う
- 可変性を持つオブジェクトの代入には注意
- オブジェクトの上書きを行う関数は値を戻さない
- 関数を呼び出す際には必ずカッコを使用する
- インポート、リロードの際には拡張子やパスは使用しない

## IV部 関数

### 15章 関数の基礎

```python
>>> def times(x, y):
...   return x * y
...
>>> times(2, 4)
8
```

### 16章 スコープと引数

### 17章 関数に関連する高度なテクニック

#### 17.8 関数を作る際のコツ

- できる限り、入力には引数、出力には `return` を使う
- グローバル変数はどうしても必要な場合以外は使用しない
- 関数の役割はひとつに絞る
- 関数はできる限り規模の小さいものにする
- 他のモジュールの変数に直接、変更を加えない

## V部 モジュール

モジュールのやり方とか

## VI部 クラスとオブジェクト指向プログラミング

### 22章 Pythonでのオブジェクト指向プログラミング

#### 22.2 オブジェクト指向プログラミング

OOP（Object Oriented Programming）についての説明

クラス, インスタンス, 継承など

### 23章 クラスのコーディング（基礎）

OOPの利用方法について説明

インスタンス, サブクラス, オーバーロードなど

### 24章 クラスのコーディング（詳細）

Pythonでのクラスの作り方

- classの書き方
- メソッド
- 継承
- オーバーロード
  - ゲッター、セッター
- 名前空間

`person.py` で具体的な例を作成

```python
>>> from person import Person
>>> ann = Person('Ann Smith', 45)
>>> ann.lastName()
'Smith'
>>> ann.birthDay()
>>> ann.age
46
>>> print(ann)
<Person:
	name=Ann Smith
	age=45
>
```

```shell
$ python person.py
<Person:
	name=Bob Smith
	age=40
>
Smith
<Person:
	name=Bob Smith
	age=41
>
<Employee:
	name=Sue Jones
	age=44
	job=dev
	pay=100000
>
Jones
<Employee:
	name=Sue Jones
	age=46
	job=dev
	pay=110000.00000000001
>
```

インデントを忘れてバグっていた。Pythonはインデントが重要。気をつけよう！

### 25章 クラスと設計

オブジェクト指向プログラミング（OOP）をうまく使うように設計していくやり方が説明してある

### 26章 クラスに関連する高度なテクニック

デリゲーションを使ってクラスを設計する方法の説明

### VI部のまとめ演習

オブジェクト指向の設計は一昔前のやり方のように感じた

オブジェクト指向のメリット

- コードの再利用ができる
- カプセル化
- 変数名の重複が防げる
- 保守がしやすい
  - （現代では違うと思う）
- プログラムに一貫性を持たせることができる
- ポリモーフィズム

## VII部 例外

### 27章 例外の基礎

例外処理の基本について

- try, except, else
- try, finally
- try, except, finaly
- raise
- assert
- with/as

### 28章 文字列例外とクラス例外

ユーザ定義の例外のやり方

- ユーザ定義の例外はクラス例外で設計する

### 29章 例外と設計

どのようにエラーハンドリングを設計すれば良いかの例



### 付録A インストールと環境設定

内容が古いのでパス

### 付録B 演習問題の解答

各章の演習問題の回答。真面目にやると結構なコード量になるので、写経するならここ。

    B.1 I部　Pythonの基礎知識
    B.2 II部　ビルトインオブジェクト
    B.3 III部　ステートメント
    B.4 IV部　関数
    B.5 V部　モジュール
    B.6 VI部　クラスとオブジェクト指向プログラミング
    B.7 VII部　例外

### 付録C さらに新しいバージョンのPythonについて

内容が古いのでパス